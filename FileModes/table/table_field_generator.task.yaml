task:
    environment: native_shared.environment.yaml
    fieldgrid:
        children: []
        elements: {}
        values: {}
    streams:
    -   main:
        -   content: "import yaml\nimport os\n\nif 'original_url' in parameters:\n\
                \    table_path = parameters['original_url']\n    # print(\"original_url\
                \ \" + table_path)\n    \n    table_dir = os.path.dirname(table_path)\n\
                \    # print(\"table_dir \" + table_dir)\n    \n    if (file.exists(table_path)):\n\
                \        content = file.download(table_path)\n        # print(content)\n\
                \        \n        table_content = yaml.safe_load(content)\n     \
                \   # print(table_content)\n        # print(type(table_content))\n\
                \        \n        table_name = table_content['table']['name']\n \
                \       table_columns = table_content['table']['columns']\n      \
                \  # print(table_name)\n        # print(table_columns)\n        \n\
                \        if (file.exists(f\"{table_dir}/{table_name} fields\")):\n\
                \            folder.create(f\"{table_dir}/{table_name} fields\")\n\
                \            # folder.create(f\"./{table_name} fields\")\n       \
                \     for col in table_columns:\n                if \"doc\" in col:\n\
                \                    desc = col['doc']\n                else:\n  \
                \                  desc = ''\n                # print(f\"name: {col['name']},\
                \ type: {col['type']}, doc: {desc}\")\n                data = {\n\
                \                    \"field\": {\n                        \"data\"\
                : {\n                            \"action\": None,\n             \
                \               \"options\": None,\n                            \"\
                params\": {\n                                \"path\": None,\n   \
                \                             \"query\": None\n                  \
                \          },\n                            \"source\": None\n    \
                \                    },\n                        \"default\": '',\n\
                \                        \"description\": desc,\n                \
                \        \"maximum\": '',\n                        \"minimum\": '',\n\
                \                        \"name\": col['name'],\n                \
                \        \"placeholder\": '',\n                        \"readonly\"\
                : False,\n                        \"required\": False,\n         \
                \               \"spacing\": '3',\n                        \"step\"\
                : '',\n                        \"type\": col['type'].lower()\n   \
                \                 }\n                }\n                \n       \
                \         # print(data)\n                yaml_str = yaml.dump(data,\
                \ sort_keys=False)\n                file.put(f\"{table_dir}/{table_name}\
                \ fields/{col['name']}.field.yaml\", yaml_str)\n                \n\
                \                print(\"fields generated\")\n        else:\n    \
                \        print(\"fields have been generated before\")\n    "
            loop-iterable: ''
            type: code
        -   content: '# create a task to view table

                # task_data = {

                #     "task": {

                #         "environment": ''native_shared.environment.yaml'',

                #         "fieldgrid": {

                #             "children": [],

                #             "elements": {},

                #             "values": {},

                #         },

                #         "streams": [

                #             "main": [

                #                 "chart": {

                #                     "advanced": '''',

                #                     "legend": ''Off'',

                #                     "series-annos": [

                #                         "anno-col": '''',

                #                         "anno-col-back": '''',

                #                         "anno-dt": False,

                #                         "anno-i": '''',

                #                         "anno-label": '''',

                #                         "anno-s": '''',

                #                         "anno-tab": 0,

                #                         "anno-type": ''box'',

                #                         "anno-u": '''',

                #                         "anno-width": '''',

                #                         "anno-x": '''',

                #                         "anno-xm": '''',

                #                         "anno-y": '''',

                #                         "anno-ym": '''',

                #                     ],

                #                     "series-formats": [

                #                         "format-col": '''',

                #                         "format-col-back": '''',

                #                         "format-dt": False,

                #                         "format-f": False,

                #                         "format-lw": '''',

                #                         "format-nrx": '''',

                #                         "format-p": False,

                #                         "format-pr": '''',

                #                         "format-ps": ''circle'',

                #                         "format-title": '''',

                #                         "format-ua": '''',

                #                     ],

                #                     "series-groups": [

                #                         "series-l": '''',

                #                         "series-s": '''',

                #                         "series-tab": 0,

                #                         "series-type": ''Line'',

                #                         "series-u": '''',

                #                         "series-x": '''',

                #                         "series-y": '''',

                #                         "series-ymax": '''',

                #                         "series-ymin": '''',

                #                         "series-z": '''',

                #                     ],

                #                     "subtitle": '''',

                #                     "title": '''',

                #                     "xaxis-type": ''category'',

                #                 },

                #                 "loop-iterable": '''',

                #                 "output": ''table'',

                #                 "table": {

                #                     "checkbox": False,

                #                     "export": False,

                #                     "filter": False,

                #                     "footer": False,

                #                     "multiselect-row": False,

                #                     "pagesize": ''15'',

                #                     "pagination": True,

                #                     "search": False,

                #                     "slate": '''',

                #                     "sortable": True,

                #                     "style": ''default'',

                #                     "title": '''',

                #                 },

                #                 "tabs": [

                #                     "content": ''select * from '' + table_name,

                #                     "source": ''{ Clarama[''''Services''''][''''ClaramaSourceDB'''']
                }'',

                #                     "tab_id": 0,

                #                 ],

                #                 "type": ''data''

                #             ]

                #         ]

                #     }

                # }


                # yaml_str = yaml.dump(task_data, sort_keys=False)

                # file.put(f"{table_dir}/{table_name}.task.yaml", yaml_str)'
            loop-iterable: ''
            type: code
        -   content: '# create add new record btn'
            loop-iterable: ''
            type: code
        -   content: '# create slate for table

                # right click on record to edit n dlt record

                # slate_data = {

                #     "slate":

                #         "grid":

                #             "children":

                #             -   "h": null

                #                 "id": element_2

                #                 "w": ''3''

                #                 "x": ''4''

                #                 "y": ''0''

                #             -   "h": ''19''

                #                 "id": element_0

                #                 "w": ''12''

                #                 "x": ''0''

                #                 "y": ''1''

                #             "elements":

                #                 "element_0":

                #                     "links":

                #                     -   "element": modal

                #                         "params": ''''

                #                         "uid": ''0''

                #                         "url": ./Issues/Tasks/Add_Comments.task.yaml

                #                     "params": ''''

                #                     "refresh": true

                #                     "url": ./Issues/Tasks/Issues.task.yaml

                #                 "element_2":

                #                     "links":

                #                     -   "element": modal

                #                         "params": ''''

                #                         "uid": ''0''

                #                         "url": ./Issues/Tasks/Add_Issues.task.yaml

                #                     "spacing": ''1''

                #                     "url": ./Issues/Fields/Add New btn.field.yaml

                # }


                # yaml_str = yaml.dump(slate_data, sort_keys=False)

                # file.put(f"{table_dir}/{table_name}.slate.yaml", yaml_str)'
            loop-iterable: ''
            type: code
